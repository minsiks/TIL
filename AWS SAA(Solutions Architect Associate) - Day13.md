# 24/7/26 AWS SAA(Solutions Architect Associate) - Day12

## 재해복구

### 1. 재해복구

- 온프레미스간 재해복구
- 온프레미스 -> 클라우드 : 하이브리드 복구
- 모두 클라우드 : 완전 클라우드 유형
- 핵심 용어
  - RPO :  즉 복구 시점 목표
  - RTO :  재해 복구시 시점 애플리케이션 다운타임
- 복구 전략
  - 백업 및 복구
    - high rpo
    - 시간이 오래걸리고  rto도 커지지만 값이 저렴
    - 쉽고 비용이 저렵한데 rpo rto 가 높음
  - 파일럿 라이트
    - 애플리케이션이 축소버전에서 계속 실행
    - 복구할때 여타 시스템만 추가
    - 크르티컬 시스템 보조
  - 웜대기
    - 시스템 전체를 실행하되 최소한의 규모로 가동
    - 프로덕션 로드로 재해시 저장
  - 다중사이트 혹은 핫 사이트
    - 몇분 몇초로 rpo rto 하지만
    - 비쌈
    - 이미 실행중인 사이트를 
    - active - active 
  - 클라우드시
    - 멀티 리전

#### 데이터베이스 마이그레이션

- 온플레미스 -> AWS Cloud
- DMS 사용 해야함 (Database Migration Servcie)
  - 동종 마이그레이션도되고
  - 이종 마이그레이션 가능
  - CDC Change Data Capture를 이용한 지속적 데이터 복제도 가능
  - ec만들어야만 함
  - 소스는 데이터베이스에 될 수 있음
    - Azure도 됨
    - amzon RD
    - S3
    - Document
  - 타겟도 여러가지 됨
- SCT
  - 소스 데이터베이스와 타깃 데이터베이스의 엔진이 다른 경우 사용

#### Aurora MySQL로 마이그레이션

- 스냅샷을 생성 스냅샷을 데이스베이스의 복원
  - 다운타임 생김
- 읽기 전용 복제본을 mysql로 생성
  - 시간이 많이 걸리고 비용이 발생할 수있음
- percona xbackup사용
- mysqldump를 데이터베이스에서 실행해서 aourora로 보냄
- 가동된체로 지속적인 복제
- postgresql도 거의 동일

#### 온프레미스 전략 클라우드에서

- ami 다운로드가능
- vm 가져오기/ 내보내기
- AWS 애플리케이션 Discovery Service
  - 대량 마이그레이션 유용
  - migration Hub 필요
- DMS
  - 복제를 허용 상호간
- SMS 
  - 라이브서버를 볼륨을 직접 복제 

#### AWS Backup

- 완전 관리형 서비스
- 서비스간에 백업을 중점적으로 관리
- 스크립트 없이 백업전략으로 선택 가능
- 대부분의 아마존 서비스 가능
- 리전 간 백업을 지원
- 계정간 백업도 지원
- 지정 시간 복구를 지원
- 예약된 백업
- 태그가 지정된 리소스 백업 가능
- 백업 플랜도 만듬
- 볼트 잠금
  - WORM 정책 시행시 백업 볼트에 저장한 백업을 삭제할 수 없음
  - 백업에대한 추가 방어막
    - 축소 또는 변경 방어
  - 백업의 안정성 보장

#### Application Discovery Service

- 서버를 클라우드로 마이그레이션
- 두가지 유형
  - Agentless Discovery
    - 가상머신, 구성, CPU와 메모리 및 디스크 사용량과같은 성능 기록에 대한 정보제공
  - Agent-absed Discovery
    - 가상 머신 내에서 더 많은 업데이트와 정보 얻을 수 있음
    - 시스템구성, 성능, 실행중인 프로세스, 시스템 사이의 네트워크 연결 등에대항 정보제공
- 모든 결과를 aws migration hub에서 볼 수 잇음
- MGN
  - 온프레미스->AWS 가장 간단
  - 리호스팅 가능

- 대규모 데이터 AWS로 전송
  - 200TB를 한다면
    - 공용인터넷 / SITE-TO-SITE
      - 즉시 셋업
      - 185일정도 걸림 반년
    - Direct connect
      - 초기 설치에 시간이 오래걸림
      - 10배정도 빠름
    - Snowball
      - 23 퍼실리티에 페럴럴로 하면
      - 종단 간 전송에 일주일
- VMware Cloud on AWS
  - 온프레미스 클라우드 같이 사용 할때 사용

### 2. 더 많은 솔루션 아키텍쳐

